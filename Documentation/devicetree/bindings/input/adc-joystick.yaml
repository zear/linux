# SPDX-License-Identifier: (GPL-2.0 OR BSD-2-Clause)
# Copyright 2019-2020 Artur Rojek
%YAML 1.2
---
$id: "http://devicetree.org/schemas/bindings/input/adc-joystick.yaml#"
$schema: "http://devicetree.org/meta-schemas/core.yaml#"

title: ADC attached joystick

maintainers:
  - Artur Rojek <contact@artur-rojek.eu>

description: |
  Bindings for joystick devices connected to ADC controllers supporting
  the Industrial I/O subsystem.

properties:
  compatible:
    const: adc-joystick

  io-channels:
    description: |
      List of phandle and IIO specifier pairs.
      Each pair defines one ADC channel to which a joystick axis is connected.
      See Documentation/devicetree/bindings/iio/iio-bindings.txt for details.

required:
  - compatible
  - io-channels

additionalProperties: false

patternProperties:
  "^axis@([0-9])$":
    type: object
    description: |
      Represents a joystick axis bound to the given ADC channel.
      For each entry in the io-channels list, one axis subnode with a matching
      index must be specified.

    properties:
      linux,abs-code:
        $ref: /schemas/types.yaml#/definitions/uint32
        description: EV_ABS specific event code generated by the axis.

      linux,abs-range:
        $ref: /schemas/types.yaml#/definitions/uint32-array
        items:
          - description: minimum value
          - description: maximum value
        description: |
          Minimum and maximum values produced by the axis.
          For an ABS_X axis this will be the left-most and right-most
          inclination of the joystick. If min > max, it is left to userspace to
          treat the axis as inverted.
          This property is interpreted as two signed 32 bit values.

      linux,abs-fuzz:
        $ref: /schemas/types.yaml#/definitions/uint32
        description: |
          Amount of noise in the input value.
          Omitting this property indicates the axis is precise.

      linux,abs-flat:
        $ref: /schemas/types.yaml#/definitions/uint32
        description: |
          Axial "deadzone", or area around the center position, where the axis
          is considered to be at rest.
          Omitting this property indicates the axis always returns to exactly
          the center position.

    required:
      - linux,abs-code
      - linux,abs-range

    additionalProperties: false

examples:
  - |
    #include <dt-bindings/iio/adc/ingenic,adc.h>
    #include <dt-bindings/input/input.h>

    joystick: adc-joystick {
      compatible = "adc-joystick";
      io-channels = <&adc INGENIC_ADC_TOUCH_XP>,
                    <&adc INGENIC_ADC_TOUCH_YP>;

      axis@0 {
              linux,abs-code = <ABS_X>;
              linux,abs-range = <3300 0>;
              linux,abs-fuzz = <4>;
              linux,abs-flat = <200>;
      };
      axis@1 {
              linux,abs-code = <ABS_Y>;
              linux,abs-range = <0 3300>;
              linux,abs-fuzz = <4>;
              linux,abs-flat = <200>;
      };
    };
